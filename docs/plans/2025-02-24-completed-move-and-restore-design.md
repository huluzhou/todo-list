# 完成移底与取消完成恢复位置 - 设计文档

> 设计日期：2025-02-24

## 1. 目标

- **勾选完成**：该项自动移动到列表最下方（已完成区块底部）。
- **取消完成**：该项恢复到列表最上方（第一条，即未完成区块顶部）。

## 2. 展示顺序

- 列表按 **先未完成、后已完成** 展示；同一状态内按 `order` 升序。
- 即：`sort by (done, order)`，未完成（done=false）在前，已完成（done=true）在后。

## 3. 数据与持久化

- 沿用现有 `Todo { id, text, done, order }` 与 `save_todos` 接口，无需改 Rust 或数据格式。
- 在「切换完成状态」时：先更新该项的 `done`，再按 `(done, order)` 得到新显示顺序，将新顺序赋为 `order = 0, 1, …, n-1`，调用 `save_todos` 写回。

## 4. 实现位置

- **仅前端**：在勾选/取消勾选的回调中完成「更新 done → 按 (done, order) 排序 → 重赋 order → save_todos」；无需改后端或 capabilities。

## 5. 边界

- 空列表、仅一条、全部完成或全部未完成时，重排后 order 仍为 0..n-1，无需特殊分支。

## 6. 方案选择

- 采用「每次切换完成状态时重排 order」：order 保持 0..n-1，逻辑简单、行为明确。
